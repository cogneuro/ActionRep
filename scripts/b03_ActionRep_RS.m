%	110821. djy. PPA2,			Modified for a NEW 3T, Korea University%	120130. djy. Loc_RepMVPA2,	For RepMVPA2%	120706. djy. Loc_RepMVPA1r1,For RepMVPA1r1%	120719. djy. a00_SRE2_4con, For SREblk2%	130721. djy. a00_SRE2r1_4con, For SREblk2. YJP ran s21 and s41 for%				IND_COL priming study.%	130721. djy. a00_SRE3_4con, For SREblk3.%	140705. djy. a02_ActionRep_10con, For ActionRep%	140824. djy. a03_ActionRep_RS, For ActionRepclc;clear all;% PARTICIPANT INFOSN={};SN{end+1} = {'s01', 'KSJ', 1:4, 4:7};	% directory, initials, runs, seriesSN{end+1} = {'s02', 'LJH', 1:4, 4:7};SN{end+1} = {'s03', 'SIH', 1:4, 5:8};SN{end+1} = {'s04', 'KSH', 1:4, 4:7};SN{end+1} = {'s05', 'JSH', 1:4, 4:7};SN{end+1} = {'s06', 'HBS', 1:4, 4:7};SN{end+1} = {'s07', 'DJR', 1:4, 4:7};SN{end+1} = {'s08', 'JMK', 1:4, 5:8};SN{end+1} = {'s09', 'CJY', 1:4, 4:7};SN{end+1} = {'s10', 'YJS', 1:4, 4:7};SN{end+1} = {'s11', 'KDW', 1:4, 4:7};SN{end+1} = {'s12', 'HMO', 1:4, 4:7};SN{end+1} = {'s14', 'JYJ', 1:4, 3:6};SN{end+1} = {'s15', 'YHJ', 1:4, 4:7};SN{end+1} = {'s16', 'LSC', 1:4, 4:7};SN{end+1} = {'s17', 'KSA', 1:4, 4:7};% SETUPSroot_dir = '/home/yi.269/data/ActionRep/';prot_dir = 'protocol';ons_dir = 'ons';curr_dir = pwd;for xsn=1:size(SN,2)S_dir = [SN{xsn}{1},SN{xsn}{2}];		fid=['ActionRep_rs_' S_dir];names={'lo1','lo2','hi1','hi2','dum','lo1_resp','lo2_resp','hi1_resp','hi2_resp','dum_resp'}; % dum = no responsedurSTIM = 2;	% 4 secdurRESP = 0;% mkdir(fullfile(root_dir, S_dir, ons_dir));TT=[];for mm=SN{xsn}{3}	fname = fullfile(root_dir, prot_dir, S_dir, ...		['datRawActionRep_' S_dir '_' num2str(mm) '.txt']);	temp  = load(fname);	TT = [TT; temp];end%---------------------------------------------- ONSET INFO.% Generates setup file		% 1_SN, 2_run, 3_trial, 4_cond, 5_IM, 6_plan, 7_TTL, 8_stim, 9_scale, 10_resp, 11_rtTT(:,end+1)=TT(:,8) + (TT(:,2)-1)*490;		% 12_concatenated stim timeTT(:,end+1)=TT(:,9) + TT(:,11) + (TT(:,2)-1)*490; % 13_concatenated RTfprintf('%s --> %d x %d\n', SN{xsn}{1}, size(TT,1), size(TT,2));TT(:,end+1)=0;	% 14_RS conditionsfor mm=1:48	nn = find(TT(:,5)==mm & mod(TT(:,4),2)==1); % close	TT(nn(1),14) = 1;	% low construal 1st	TT(nn(2),14) = 2;	% low construal 2nd		nn = find(TT(:,5)==mm & mod(TT(:,4),2)==0); % far	TT(nn(1),14) = 3;	% high construal 1st	TT(nn(2),14) = 4;	% high construal 2ndendfor con=1:4	onsets{con} = TT( TT(:,14)==con & TT(:,10)~=0, 12)/2; 	difficulty{con} = TT( TT(:,14)==con & TT(:,10)~=0, 10)-1;	durations{con} = durSTIM;		onsets{con+5} = TT( TT(:,14)==con & TT(:,10)~=0, 13)/2; 	durations{con+5} = durRESP;endonsets{5} = TT( TT(:,10)==0, 12)/2;durations{5} = durSTIM;onsets{10} = TT( TT(:,10)==0, 13)/2;	% in case of no response, it's the scale presentation time.durations{10} = durRESP;mat_name = fullfile(root_dir, SN{xsn}{1}, ons_dir, ['spm_' fid]);save(mat_name, 'names', 'onsets', 'durations', 'difficulty');	fprintf(['spm_' fid ' has been saved at %s.\n'], fullfile(root_dir, SN{xsn}{1}, ons_dir));clear b xTime xCond onsets durations difficulty;end%---------------------------------- EOF.